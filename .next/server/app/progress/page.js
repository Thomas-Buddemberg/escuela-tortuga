(()=>{var e={};e.id=92,e.ids=[92],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9270:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>d,routeModule:()=>x,tree:()=>u}),r(6946),r(1871),r(5866);var s=r(3191),n=r(8716),a=r(7922),i=r.n(a),l=r(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let u=["",{children:["progress",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6946)),"/Users/tbuddemberg/Desktop/Escuela/escuela-tortuga/src/app/progress/page.tsx"]}]},{metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1871)),"/Users/tbuddemberg/Desktop/Escuela/escuela-tortuga/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],d=["/Users/tbuddemberg/Desktop/Escuela/escuela-tortuga/src/app/progress/page.tsx"],c="/progress/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/progress/page",pathname:"/progress",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},652:(e,t,r)=>{Promise.resolve().then(r.bind(r,6087))},6087:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(326),n=r(1967),a=r(812),i=r(3053),l=r(7577),o=r(4168),u=r(6197),d=r(7632);function c(){let{player:e,settings:t,loading:r}=(0,o.nn)(),c=(0,o.s2)(60),m=(0,o.e6)(30),x=(0,l.useMemo)(()=>e?(0,u.rS)(e.kiTotal):null,[e]),p=(0,l.useMemo)(()=>e?(0,d.y)(e.kiTotal):null,[e]);if(r||!e||!t||!x||!p)return s.jsx("div",{className:"space-y-4",children:s.jsx(n.Z,{title:"Cargando progreso..."})});let h=(function(e){let t=new Map;for(let r of e){let e=t.get(r.dateISO)??0;t.set(r.dateISO,e+(r.kiDelta??0))}return Array.from(t.entries()).sort((e,t)=>e[0]<t[0]?1:-1)})(c).slice(0,14);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(n.Z,{title:"Resumen",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:[s.jsx(i.Z,{label:"KI total",value:String(e.kiTotal)}),s.jsx(i.Z,{label:"Forma actual",value:`${x.emoji} ${x.name}`}),s.jsx(i.Z,{label:"Streak",value:`${e.streak} d\xedas`}),s.jsx(i.Z,{label:"Cap diario",value:`${t.dailyKiCap} KI`})]}),s.jsx("div",{className:"mt-4",children:p.nextName?s.jsx(a.Z,{value:e.kiTotal-(u.YD.find(e=>e.key===x.key)?.minKi??0),max:(p.nextKi??e.kiTotal)-(u.YD.find(e=>e.key===x.key)?.minKi??0),label:`Hacia ${p.nextName}`}):s.jsx("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 text-sm",children:"Est\xe1s en la forma m\xe1xima. Ahora el juego es la constancia \uD83D\uDC22✨"})})]}),s.jsx(n.Z,{title:"Escalera de transformaciones",children:s.jsx("div",{className:"space-y-2",children:u.YD.map(t=>{let r=e.kiTotal>=t.minKi,n=t.key===x.key;return(0,s.jsxs)("div",{className:["flex items-center justify-between rounded-2xl border p-3",n?"border-white/25 bg-white/10":"border-white/10 bg-black/20"].join(" "),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:t.emoji}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-sm font-semibold",children:t.name}),(0,s.jsxs)("div",{className:"text-[11px] text-white/55",children:["Desde KI ",t.minKi]})]})]}),s.jsx("div",{className:"text-xs",children:r?s.jsx("span",{className:"rounded-xl border border-emerald-500/25 bg-emerald-500/12 px-2 py-1 text-emerald-100",children:"Desbloqueada"}):s.jsx("span",{className:"rounded-xl border border-white/10 bg-white/5 px-2 py-1 text-white/60",children:"Bloqueada"})})]},t.key)})})}),s.jsx(n.Z,{title:"KI ganado (\xfaltimos 14 d\xedas)",children:s.jsx("div",{className:"space-y-2",children:0===h.length?s.jsx("div",{className:"text-sm text-white/70",children:"A\xfan no hay historial. Entrena o completa misiones \uD83D\uDC22"}):h.map(([e,t])=>(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-white/10 bg-black/20 px-3 py-2",children:[s.jsx("div",{className:"text-xs text-white/60",children:e}),(0,s.jsxs)("div",{className:"text-sm font-semibold",children:["+",t," KI"]})]},e))})}),s.jsx(n.Z,{title:"Entrenamientos recientes",children:s.jsx("div",{className:"space-y-2",children:0===m.length?s.jsx("div",{className:"text-sm text-white/70",children:"A\xfan no hay entrenamientos guardados."}):m.map(e=>s.jsx("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-sm font-semibold",children:e.dateISO}),(0,s.jsxs)("div",{className:"text-[11px] text-white/55",children:["Plantilla ",e.templateId]})]}),(0,s.jsxs)("div",{className:"text-xs text-white/60",children:["Modo: ","capsule_30"===e.mode?"Orgullo 30m":"capsule_60"===e.mode?"Orgullo 60m":e.mode]})]})},String(e.id)))})})]})}},1967:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(326);function n({title:e,children:t,right:r}){return(0,s.jsxs)("section",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-soft",children:[e||r?(0,s.jsxs)("header",{className:"mb-3 flex items-start justify-between gap-4",children:[e?s.jsx("h2",{className:"text-sm font-semibold text-white/90",children:e}):s.jsx("div",{}),r]}):null,t??null]})}},812:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(326);function n({value:e,max:t,label:r}){let n=t<=0?0:Math.max(0,Math.min(100,Math.round(e/t*100)));return(0,s.jsxs)("div",{className:"space-y-1",children:[r?s.jsx("div",{className:"text-xs text-white/70",children:r}):null,s.jsx("div",{className:"h-3 overflow-hidden rounded-full border border-white/10 bg-black/30",children:s.jsx("div",{className:"h-full bg-white/70",style:{width:`${n}%`}})}),(0,s.jsxs)("div",{className:"flex justify-between text-[11px] text-white/55",children:[s.jsx("span",{children:e}),s.jsx("span",{children:t})]})]})}},3053:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(326);function n({label:e,value:t}){return(0,s.jsxs)("div",{className:"rounded-xl border border-white/10 bg-black/20 px-3 py-2",children:[s.jsx("div",{className:"text-[11px] text-white/55",children:e}),s.jsx("div",{className:"text-sm font-semibold text-white/90",children:t})]})}},7632:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});var s=r(6197);function n(e){let t=(0,s.rS)(e),r=(0,s.$T)(e);return{currentName:`${t.emoji} ${t.name}`,nextName:r?`${r.emoji} ${r.name}`:null,currentKi:e,nextKi:r?.minKi??null,remaining:r?Math.max(0,r.minKi-e):null}}},6197:(e,t,r)=>{"use strict";r.d(t,{$T:()=>a,YD:()=>s,rS:()=>n});let s=[{key:"normal",name:"Normal",minKi:0,emoji:"\uD83D\uDE42"},{key:"kaioken",name:"Kaioken",minKi:100,emoji:"\uD83D\uDD25"},{key:"kaioken10",name:"Kaioken \xd710",minKi:300,emoji:"\uD83D\uDD25\uD83D\uDD25"},{key:"ssj",name:"S\xfaper Saiyan",minKi:600,emoji:"\uD83D\uDC9B"},{key:"ssj2",name:"S\xfaper Saiyan 2",minKi:1e3,emoji:"⚡"},{key:"ssj3",name:"S\xfaper Saiyan 3",minKi:1500,emoji:"\uD83D\uDD25"},{key:"ssj4",name:"S\xfaper Saiyan 4",minKi:2200,emoji:"\uD83E\uDD8D"},{key:"god",name:"S\xfaper Saiyan Dios",minKi:3e3,emoji:"\uD83D\uDD34"},{key:"blue",name:"S\xfaper Saiyan Dios SS",minKi:4e3,emoji:"\uD83D\uDD35"},{key:"blue_kaioken",name:"Dios SS + Kaioken",minKi:5500,emoji:"\uD83D\uDD35\uD83D\uDD25"},{key:"ui",name:"Ultra Instinto",minKi:7e3,emoji:"⚪"},{key:"mui",name:"Ultra Instinto Dominado",minKi:9e3,emoji:"⚪✨"}];function n(e){let t=s[0];for(let r of s)e>=r.minKi&&(t=r);return t}function a(e){for(let t of s)if(e<t.minKi)return t;return null}},4168:(e,t,r)=>{"use strict";r.d(t,{nn:()=>l,s2:()=>u,tu:()=>o,e6:()=>d});var s=r(3864),n=r(7577);function a(e,t,r){return function(e,t,r){"function"==typeof e?(s=t||[],a=r):(s=[],a=t);var s,a,i=n.useRef({hasResult:!1,result:a,error:null}),l=n.useReducer(function(e){return e+1},0);l[0];var o=l[1],u=n.useMemo(function(){var t="function"==typeof e?e():e;if(!t||"function"!=typeof t.subscribe){if(e===t)throw TypeError("Given argument to useObservable() was neither a valid observable nor a function.");throw TypeError("Observable factory given to useObservable() did not return a valid observable.")}if(!i.current.hasResult&&"undefined"!=typeof window&&("function"!=typeof t.hasValue||t.hasValue())){if("function"==typeof t.getValue)i.current.result=t.getValue(),i.current.hasResult=!0;else{var r=t.subscribe(function(e){i.current.result=e,i.current.hasResult=!0});"function"==typeof r?r():r.unsubscribe()}}return t},s);if(n.useDebugValue(i.current.result),n.useEffect(function(){var e=u.subscribe(function(e){var t=i.current;(null!==t.error||t.result!==e)&&(t.error=null,t.result=e,t.hasResult=!0,o())},function(e){var t=i.current;t.error!==e&&(t.error=e,o())});return"function"==typeof e?e:e.unsubscribe.bind(e)},s),i.current.error)throw i.current.error;return i.current.result}(function(){return(0,s.Y1)(e)},t||[],r)}var i=r(6205);function l(){let e=a(async()=>i.db.player.get("player"),[]),t=a(async()=>i.db.settings.get("settings"),[]);return{player:e,settings:t,loading:!e||!t}}function o(e){return{questCompletions:a(async()=>i.db.quests.where({dateISO:e}).toArray(),[e])??[],actions:a(async()=>i.db.actions.where({dateISO:e}).toArray(),[e])??[],workouts:a(async()=>i.db.workouts.where({dateISO:e}).toArray(),[e])??[]}}function u(e=30){return a(async()=>await i.db.actions.orderBy("createdAtISO").reverse().limit(e).toArray(),[e])??[]}function d(e=30){return a(async()=>await i.db.workouts.orderBy("completedAtISO").reverse().limit(e).toArray(),[e])??[]}},6946:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});var s=r(8570);let n=(0,s.createProxy)(String.raw`/Users/tbuddemberg/Desktop/Escuela/escuela-tortuga/src/app/progress/page.tsx`),{__esModule:a,$$typeof:i}=n;n.default;let l=(0,s.createProxy)(String.raw`/Users/tbuddemberg/Desktop/Escuela/escuela-tortuga/src/app/progress/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,693,55],()=>r(9270));module.exports=s})();