(()=>{var e={};e.id=902,e.ids=[902],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},43:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>d,routeModule:()=>x,tree:()=>u}),r(4641),r(1871),r(5866);var s=r(3191),a=r(8716),n=r(7922),i=r.n(n),l=r(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let u=["",{children:["progreso",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4641)),"/Users/tbuddemberg/Desktop/Escuela/escuela-tortuga/src/app/progreso/page.tsx"]}]},{metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1871)),"/Users/tbuddemberg/Desktop/Escuela/escuela-tortuga/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],d=["/Users/tbuddemberg/Desktop/Escuela/escuela-tortuga/src/app/progreso/page.tsx"],c="/progreso/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/progreso/page",pathname:"/progreso",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},9689:(e,t,r)=>{Promise.resolve().then(r.bind(r,7333))},7333:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(326),a=r(1967),n=r(812),i=r(3053),l=r(7577);function o(e){let{data:t,width:r="100%",height:a=180,stroke:n="#87e2a5",strokeWidth:i=2,fill:l=null,yMin:o,yMax:u,className:d,grid:c=!0}=e,m={top:8,right:8,bottom:18,left:8},x="number"==typeof r?r:640,p=x-m.left-m.right,h=a-m.top-m.bottom,f=t.length,b=f>0?Math.min(...t.map(e=>e.x)):0,y=f>0?Math.max(...t.map(e=>e.x)):1,g=f>0?Math.min(...t.map(e=>e.y)):0,j=f>0?Math.max(...t.map(e=>e.y)):1,v=o??Math.min(0,g),w=u??(j===g?j+1:j),D=e=>0===p||y===b?m.left:m.left+(e-b)/(y-b)*p,k=e=>0===h||w===v?m.top+h:m.top+(1-(e-v)/(w-v))*h,N="";t.forEach((e,t)=>{let r=D(e.x),s=k(e.y);N+=0===t?`M ${r} ${s}`:` L ${r} ${s}`});let K=null;if(l&&t.length>1){let e=t[0],r=t[t.length-1],s=k(0);K=`M ${D(e.x)} ${s}`,t.forEach(e=>{K+=` L ${D(e.x)} ${k(e.y)}`}),K+=` L ${D(r.x)} ${s} Z`}let S=[];if(c)for(let e=0;e<=4;e++){let t=m.top+h*e/4;S.push(s.jsx("line",{x1:m.left,x2:m.left+p,y1:t,y2:t,stroke:"#ffffff18",strokeWidth:1},`g-${e}`))}return(0,s.jsxs)("svg",{width:r,height:a,viewBox:`0 0 ${"number"==typeof r?r:x} ${a}`,className:d,children:[s.jsx("rect",{x:0,y:0,width:"number"==typeof r?r:x,height:a,fill:"transparent"}),S,l&&K?s.jsx("path",{d:K,fill:l,stroke:"none"}):null,s.jsx("path",{d:N,fill:"none",stroke:n,strokeWidth:i,strokeLinejoin:"round",strokeLinecap:"round"})]})}var u=r(4168),d=r(6197),c=r(7632),m=r(2609);function x(){let{player:e,settings:t,loading:r}=(0,u.nn)(),x=(0,u.rn)(),p=(0,u.e6)(30),h=(0,l.useMemo)(()=>e?(0,d.rS)(e.kiTotal):null,[e]),f=(0,l.useMemo)(()=>e?(0,c.y)(e.kiTotal):null,[e]),b=(0,m.Gs)(),y=(0,l.useMemo)(()=>{let e=new Map;for(let t of x){let r=e.get(t.dateISO)??0;e.set(t.dateISO,r+(t.kiDelta??0))}return e},[x]),g=(0,l.useMemo)(()=>{if(0===x.length)return[];let e=x[0]?.dateISO??b;(!e||e>b)&&(e=b);let t=[],r=e;for(;r<=b;)t.push(r),r=(0,m.NH)(r,1);return t},[x,b]),j=(0,l.useMemo)(()=>g.map(e=>({dateISO:e,y:y.get(e)??0,x:(0,m.$I)(e).getTime()})),[g,y]),v=(0,l.useMemo)(()=>{let e=0;return j.map(t=>(e+=t.y,{x:t.x,y:e,dateISO:t.dateISO}))},[j]);return!r&&e&&t&&h&&f?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(a.Z,{title:"Resumen",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:[s.jsx(i.Z,{label:"KI total",value:String(e.kiTotal)}),s.jsx(i.Z,{label:"Forma actual",value:`${h.emoji} ${h.name}`}),s.jsx(i.Z,{label:"Streak",value:`${e.streak} d\xedas`}),s.jsx(i.Z,{label:"Cap diario",value:`${t.dailyKiCap} KI`})]}),s.jsx("div",{className:"mt-4",children:f.nextName?s.jsx(n.Z,{value:e.kiTotal-(d.YD.find(e=>e.key===h.key)?.minKi??0),max:(f.nextKi??e.kiTotal)-(d.YD.find(e=>e.key===h.key)?.minKi??0),label:`Hacia ${f.nextName}`}):s.jsx("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3 text-sm",children:"Est\xe1s en la forma m\xe1xima. Ahora el juego es la constancia \uD83D\uDC22✨"})})]}),s.jsx(a.Z,{title:"Escalera de transformaciones",children:s.jsx("div",{className:"space-y-2",children:d.YD.map(t=>{let r=e.kiTotal>=t.minKi,a=t.key===h.key;return(0,s.jsxs)("div",{className:["flex items-center justify-between rounded-2xl border p-3",a?"border-white/25 bg-white/10":"border-white/10 bg-black/20"].join(" "),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:t.emoji}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-sm font-semibold",children:t.name}),(0,s.jsxs)("div",{className:"text-[11px] text-white/55",children:["Desde KI ",t.minKi]})]})]}),s.jsx("div",{className:"text-xs",children:r?s.jsx("span",{className:"rounded-xl border border-emerald-500/25 bg-emerald-500/12 px-2 py-1 text-emerald-100",children:"Desbloqueada"}):s.jsx("span",{className:"rounded-xl border border-white/10 bg-white/5 px-2 py-1 text-white/60",children:"Bloqueada"})})]},t.key)})})}),s.jsx(a.Z,{title:"KI diario (hist\xf3rico)",children:s.jsx("div",{className:"space-y-2",children:0===j.length||j.every(e=>0===e.y)?s.jsx("div",{className:"text-sm text-white/70",children:"A\xfan no hay historial suficiente para graficar. \xa1Empieza a sumar KI! \uD83D\uDC22"}):(0,s.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3",children:[s.jsx(o,{data:j.map((e,t)=>({x:t,y:e.y})),height:180,stroke:"#8bd5ff",fill:"#8bd5ff22",className:"w-full"}),(0,s.jsxs)("div",{className:"mt-2 flex items-center justify-between text-[11px] text-white/55",children:[s.jsx("span",{children:g[0]}),s.jsx("span",{children:g[g.length-1]})]})]})})}),s.jsx(a.Z,{title:"KI acumulado (hist\xf3rico)",children:s.jsx("div",{className:"space-y-2",children:0===v.length||v.every(e=>0===e.y)?s.jsx("div",{className:"text-sm text-white/70",children:"A\xfan no hay historial suficiente para graficar."}):(0,s.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3",children:[s.jsx(o,{data:v.map((e,t)=>({x:t,y:e.y})),height:180,stroke:"#87e2a5",fill:"#87e2a522",className:"w-full"}),(0,s.jsxs)("div",{className:"mt-2 flex items-center justify-between text-[11px] text-white/55",children:[s.jsx("span",{children:g[0]}),s.jsx("span",{children:g[g.length-1]})]})]})})}),s.jsx(a.Z,{title:"Entrenamientos recientes",children:s.jsx("div",{className:"space-y-2",children:0===p.length?s.jsx("div",{className:"text-sm text-white/70",children:"A\xfan no hay entrenamientos guardados."}):p.map(e=>s.jsx("div",{className:"rounded-xl border border-white/10 bg-black/20 p-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-sm font-semibold",children:e.dateISO}),(0,s.jsxs)("div",{className:"text-[11px] text-white/55",children:["Plantilla ",e.templateId]})]}),(0,s.jsxs)("div",{className:"text-xs text-white/60",children:["Modo: ","capsule_30"===e.mode?"Orgullo 30m":"capsule_60"===e.mode?"Orgullo 60m":e.mode]})]})},String(e.id)))})})]}):s.jsx("div",{className:"space-y-4",children:s.jsx(a.Z,{title:"Cargando progreso..."})})}},1967:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(326);function a({title:e,children:t,right:r}){return(0,s.jsxs)("section",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-soft",children:[e||r?(0,s.jsxs)("header",{className:"mb-3 flex items-start justify-between gap-4",children:[e?s.jsx("h2",{className:"text-sm font-semibold text-white/90",children:e}):s.jsx("div",{}),r]}):null,t??null]})}},812:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(326);function a({value:e,max:t,label:r}){let a=t<=0?0:Math.max(0,Math.min(100,Math.round(e/t*100)));return(0,s.jsxs)("div",{className:"space-y-1",children:[r?s.jsx("div",{className:"text-xs text-white/70",children:r}):null,s.jsx("div",{className:"h-3 overflow-hidden rounded-full border border-white/10 bg-black/30",children:s.jsx("div",{className:"h-full bg-white/70",style:{width:`${a}%`}})}),(0,s.jsxs)("div",{className:"flex justify-between text-[11px] text-white/55",children:[s.jsx("span",{children:e}),s.jsx("span",{children:t})]})]})}},3053:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(326);function a({label:e,value:t}){return(0,s.jsxs)("div",{className:"rounded-xl border border-white/10 bg-black/20 px-3 py-2",children:[s.jsx("div",{className:"text-[11px] text-white/55",children:e}),s.jsx("div",{className:"text-sm font-semibold text-white/90",children:t})]})}},7632:(e,t,r)=>{"use strict";r.d(t,{y:()=>a});var s=r(6197);function a(e){let t=(0,s.rS)(e),r=(0,s.$T)(e);return{currentName:`${t.emoji} ${t.name}`,nextName:r?`${r.emoji} ${r.name}`:null,currentKi:e,nextKi:r?.minKi??null,remaining:r?Math.max(0,r.minKi-e):null}}},6197:(e,t,r)=>{"use strict";r.d(t,{$T:()=>n,YD:()=>s,rS:()=>a});let s=[{key:"normal",name:"Normal",minKi:0,emoji:"\uD83D\uDE42"},{key:"kaioken",name:"Kaioken",minKi:100,emoji:"\uD83D\uDD25"},{key:"kaioken10",name:"Kaioken \xd710",minKi:300,emoji:"\uD83D\uDD25\uD83D\uDD25"},{key:"ssj",name:"S\xfaper Saiyan",minKi:600,emoji:"\uD83D\uDC9B"},{key:"ssj2",name:"S\xfaper Saiyan 2",minKi:1e3,emoji:"⚡"},{key:"ssj3",name:"S\xfaper Saiyan 3",minKi:1500,emoji:"\uD83D\uDD25"},{key:"ssj4",name:"S\xfaper Saiyan 4",minKi:2200,emoji:"\uD83E\uDD8D"},{key:"god",name:"S\xfaper Saiyan Dios",minKi:3e3,emoji:"\uD83D\uDD34"},{key:"blue",name:"S\xfaper Saiyan Dios SS",minKi:4e3,emoji:"\uD83D\uDD35"},{key:"blue_kaioken",name:"Dios SS + Kaioken",minKi:5500,emoji:"\uD83D\uDD35\uD83D\uDD25"},{key:"ui",name:"Ultra Instinto",minKi:7e3,emoji:"⚪"},{key:"mui",name:"Ultra Instinto Dominado",minKi:9e3,emoji:"⚪✨"}];function a(e){let t=s[0];for(let r of s)e>=r.minKi&&(t=r);return t}function n(e){for(let t of s)if(e<t.minKi)return t;return null}},4168:(e,t,r)=>{"use strict";r.d(t,{rn:()=>u,nn:()=>l,tu:()=>o,e6:()=>d});var s=r(3864),a=r(7577);function n(e,t,r){return function(e,t,r){"function"==typeof e?(s=t||[],n=r):(s=[],n=t);var s,n,i=a.useRef({hasResult:!1,result:n,error:null}),l=a.useReducer(function(e){return e+1},0);l[0];var o=l[1],u=a.useMemo(function(){var t="function"==typeof e?e():e;if(!t||"function"!=typeof t.subscribe){if(e===t)throw TypeError("Given argument to useObservable() was neither a valid observable nor a function.");throw TypeError("Observable factory given to useObservable() did not return a valid observable.")}if(!i.current.hasResult&&"undefined"!=typeof window&&("function"!=typeof t.hasValue||t.hasValue())){if("function"==typeof t.getValue)i.current.result=t.getValue(),i.current.hasResult=!0;else{var r=t.subscribe(function(e){i.current.result=e,i.current.hasResult=!0});"function"==typeof r?r():r.unsubscribe()}}return t},s);if(a.useDebugValue(i.current.result),a.useEffect(function(){var e=u.subscribe(function(e){var t=i.current;(null!==t.error||t.result!==e)&&(t.error=null,t.result=e,t.hasResult=!0,o())},function(e){var t=i.current;t.error!==e&&(t.error=e,o())});return"function"==typeof e?e:e.unsubscribe.bind(e)},s),i.current.error)throw i.current.error;return i.current.result}(function(){return(0,s.Y1)(e)},t||[],r)}var i=r(6205);function l(){let e=n(async()=>i.db.player.get("player"),[]),t=n(async()=>i.db.settings.get("settings"),[]);return{player:e,settings:t,loading:!e||!t}}function o(e){return{questCompletions:n(async()=>i.db.quests.where({dateISO:e}).toArray(),[e])??[],actions:n(async()=>i.db.actions.where({dateISO:e}).toArray(),[e])??[],workouts:n(async()=>i.db.workouts.where({dateISO:e}).toArray(),[e])??[]}}function u(){return n(async()=>await i.db.actions.orderBy("dateISO").toArray(),[])??[]}function d(e=30){return n(async()=>await i.db.workouts.orderBy("completedAtISO").reverse().limit(e).toArray(),[e])??[]}},4641:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var s=r(8570);let a=(0,s.createProxy)(String.raw`/Users/tbuddemberg/Desktop/Escuela/escuela-tortuga/src/app/progreso/page.tsx`),{__esModule:n,$$typeof:i}=a;a.default;let l=(0,s.createProxy)(String.raw`/Users/tbuddemberg/Desktop/Escuela/escuela-tortuga/src/app/progreso/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,693,55],()=>r(43));module.exports=s})();