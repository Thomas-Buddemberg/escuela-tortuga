(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1601:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(5480),r(1871),r(5866);var s=r(3191),a=r(8716),i=r(7922),n=r.n(i),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5480)),"/Users/tbuddemberg/Desktop/Escuela/escuela-tortuga/src/app/page.tsx"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1871)),"/Users/tbuddemberg/Desktop/Escuela/escuela-tortuga/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],c=["/Users/tbuddemberg/Desktop/Escuela/escuela-tortuga/src/app/page.tsx"],u="/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4840:(e,t,r)=>{Promise.resolve().then(r.bind(r,4497))},4497:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(326),a=r(1967),i=r(812),n=r(3053),o=r(8648),l=r(8145),d=r(7577),c=r(2609),u=r(4168),m=r(7632),x=r(6197),p=r(2847),h=r(6714),b=r(434);function f(){let e=(0,c.Gs)(),{player:t,settings:r,loading:f}=(0,u.nn)(),{questCompletions:y,actions:g,workouts:j}=(0,u.tu)(e),[v,w]=(0,d.useState)(null),k=(0,d.useMemo)(()=>t?(0,x.rS)(t.kiTotal):null,[t]),D=(0,d.useMemo)(()=>t?(0,m.y)(t.kiTotal):null,[t]),N=(0,p.ar)(),S=new Set(y.map(e=>e.questId)),K=t?.kiToday??0,_=r?.dailyKiCap??50,I=j.length;async function q(t){let r=await (0,h.J)({todayISO:e,type:t,note:"quick_action"});w({msg:r.message,kind:r.kiAdded>0?"success":r.capped?"warning":"info"})}async function A(t,r){let s=await (0,p.js)({dateISO:e,questId:t,actionOverride:r});w({msg:s.message,kind:s.kiAdded>0?"success":"info"})}return!f&&t&&r&&k&&D?(0,s.jsxs)("div",{className:"space-y-4",children:[v?s.jsx(l.Z,{message:v.msg,kind:v.kind,onClose:()=>w(null)}):null,(0,s.jsxs)(a.Z,{title:"Estado del guerrero",right:(0,s.jsxs)("div",{className:"text-xs text-white/60",children:["Hoy: ",s.jsx("span",{className:"font-semibold text-white/85",children:e})]}),children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:[s.jsx(n.Z,{label:"KI total",value:String(t.kiTotal)}),s.jsx(n.Z,{label:"Forma",value:`${k.emoji} ${k.name}`}),s.jsx(n.Z,{label:"Streak",value:`${t.streak} d\xedas`}),s.jsx(n.Z,{label:"Entrenos hoy",value:`${I}`})]}),(0,s.jsxs)("div",{className:"mt-4 grid gap-4 sm:grid-cols-2",children:[s.jsx(i.Z,{value:Math.min(K,_),max:_,label:`KI hoy (cap ${_})`}),(0,s.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3",children:[s.jsx("div",{className:"text-xs text-white/60",children:"Progreso a la siguiente transformaci\xf3n"}),D.nextName?(0,s.jsxs)("div",{className:"mt-1 text-sm",children:[s.jsx("span",{className:"font-semibold",children:D.nextName})," ",(0,s.jsxs)("span",{className:"text-white/60",children:["en ",D.remaining," KI (meta: ",D.nextKi,")"]})]}):s.jsx("div",{className:"mt-1 text-sm font-semibold",children:"M\xe1xima transformaci\xf3n alcanzada \uD83D\uDC22✨"})]})]}),(0,s.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[s.jsx(b.default,{href:"/workout",children:s.jsx(o.Z,{variant:"primary",children:"Entrenar ahora"})}),s.jsx(o.Z,{variant:"secondary",onClick:()=>q("walk"),children:"+ Caminata (5 KI)"}),s.jsx(o.Z,{variant:"secondary",onClick:()=>q("mobility"),children:"+ Movilidad (5 KI)"})]})]}),s.jsx(a.Z,{title:"Misiones del d\xeda",children:s.jsx("div",{className:"space-y-3",children:N.map(e=>{let t=S.has(e.questId),r="side_walk_or_mobility"===e.questId,a="main_workout"===e.questId;return(0,s.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-sm font-semibold",children:e.title}),s.jsx("div",{className:"text-xs text-white/65",children:e.description})]}),s.jsx("div",{className:"text-xs text-white/60",children:a?"KI seg\xfan modo":`+${e.rewardKi} KI`})]}),s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:t?s.jsx("span",{className:"rounded-xl bg-emerald-500/15 px-3 py-2 text-xs text-emerald-100 border border-emerald-500/20",children:"Completada ✅"}):a?s.jsx(b.default,{href:"/workout",children:s.jsx(o.Z,{variant:"secondary",children:"Ir a entrenar"})}):r?(0,s.jsxs)(s.Fragment,{children:[s.jsx(o.Z,{variant:"secondary",onClick:()=>A(e.questId,"walk"),children:"Marcar caminata"}),s.jsx(o.Z,{variant:"secondary",onClick:()=>A(e.questId,"mobility"),children:"Marcar movilidad"})]}):s.jsx(o.Z,{variant:"secondary",onClick:()=>A(e.questId),children:"Completar"})})]},e.questId)})})}),(0,s.jsxs)(a.Z,{title:"Resumen de hoy",children:[(0,s.jsxs)("div",{className:"text-sm text-white/80",children:["Acciones registradas: ",s.jsx("span",{className:"font-semibold",children:g.length})]}),s.jsx("div",{className:"mt-2 space-y-1 text-xs text-white/60",children:0===g.length?s.jsx("p",{children:"Sin acciones todav\xeda. Haz una misi\xf3n o entrena \uD83D\uDC22"}):g.slice().sort((e,t)=>e.createdAtISO<t.createdAtISO?1:-1).map(e=>(0,s.jsxs)("div",{className:"flex justify-between gap-2",children:[s.jsx("span",{className:"truncate",children:e.type.replaceAll("_"," ")}),(0,s.jsxs)("span",{className:"font-semibold text-white/80",children:["+",e.kiDelta]})]},String(e.id)))})]})]}):s.jsx("div",{className:"space-y-4",children:s.jsx(a.Z,{title:"Cargando...",children:s.jsx("p",{className:"text-sm text-white/70",children:"Preparando tu dojo \uD83D\uDC22"})})})}},8648:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(326);function a({variant:e="primary",className:t="",...r}){return s.jsx("button",{className:["inline-flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-sm font-medium transition disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-white text-black hover:opacity-90",secondary:"bg-white/10 text-white hover:bg-white/15 border border-white/10",ghost:"bg-transparent text-white/80 hover:bg-white/10 hover:text-white",danger:"bg-red-500/20 text-red-200 hover:bg-red-500/25 border border-red-500/25"}[e],t].join(" "),...r})}},1967:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(326);function a({title:e,children:t,right:r}){return(0,s.jsxs)("section",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-soft",children:[e||r?(0,s.jsxs)("header",{className:"mb-3 flex items-start justify-between gap-4",children:[e?s.jsx("h2",{className:"text-sm font-semibold text-white/90",children:e}):s.jsx("div",{}),r]}):null,t??null]})}},812:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(326);function a({value:e,max:t,label:r}){let a=t<=0?0:Math.max(0,Math.min(100,Math.round(e/t*100)));return(0,s.jsxs)("div",{className:"space-y-1",children:[r?s.jsx("div",{className:"text-xs text-white/70",children:r}):null,s.jsx("div",{className:"h-3 overflow-hidden rounded-full border border-white/10 bg-black/30",children:s.jsx("div",{className:"h-full bg-white/70",style:{width:`${a}%`}})}),(0,s.jsxs)("div",{className:"flex justify-between text-[11px] text-white/55",children:[s.jsx("span",{children:e}),s.jsx("span",{children:t})]})]})}},3053:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(326);function a({label:e,value:t}){return(0,s.jsxs)("div",{className:"rounded-xl border border-white/10 bg-black/20 px-3 py-2",children:[s.jsx("div",{className:"text-[11px] text-white/55",children:e}),s.jsx("div",{className:"text-sm font-semibold text-white/90",children:t})]})}},8145:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(326),a=r(7577);function i({message:e,kind:t="info",onClose:r,durationMs:i=2600}){let[n,o]=(0,a.useState)(!0);return n?s.jsx("div",{className:"fixed inset-x-0 bottom-20 z-50 mx-auto max-w-3xl px-4",children:s.jsx("div",{className:`rounded-2xl border p-3 shadow-soft ${"success"===t?"border-emerald-500/25 bg-emerald-500/12 text-emerald-100":"warning"===t?"border-amber-500/25 bg-amber-500/12 text-amber-100":"border-white/10 bg-white/6 text-white/90"}`,children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[s.jsx("div",{className:"text-sm",children:e}),s.jsx("button",{className:"rounded-lg px-2 py-1 text-xs text-white/70 hover:bg-white/10",onClick:()=>{o(!1),r()},children:"Cerrar"})]})})}):null}},7632:(e,t,r)=>{"use strict";r.d(t,{y:()=>a});var s=r(6197);function a(e){let t=(0,s.rS)(e),r=(0,s.$T)(e);return{currentName:`${t.emoji} ${t.name}`,nextName:r?`${r.emoji} ${r.name}`:null,currentKi:e,nextKi:r?.minKi??null,remaining:r?Math.max(0,r.minKi-e):null}}},6197:(e,t,r)=>{"use strict";r.d(t,{$T:()=>i,YD:()=>s,rS:()=>a});let s=[{key:"normal",name:"Normal",minKi:0,emoji:"\uD83D\uDE42"},{key:"kaioken",name:"Kaioken",minKi:100,emoji:"\uD83D\uDD25"},{key:"kaioken10",name:"Kaioken \xd710",minKi:300,emoji:"\uD83D\uDD25\uD83D\uDD25"},{key:"ssj",name:"S\xfaper Saiyan",minKi:600,emoji:"\uD83D\uDC9B"},{key:"ssj2",name:"S\xfaper Saiyan 2",minKi:1e3,emoji:"⚡"},{key:"ssj3",name:"S\xfaper Saiyan 3",minKi:1500,emoji:"\uD83D\uDD25"},{key:"ssj4",name:"S\xfaper Saiyan 4",minKi:2200,emoji:"\uD83E\uDD8D"},{key:"god",name:"S\xfaper Saiyan Dios",minKi:3e3,emoji:"\uD83D\uDD34"},{key:"blue",name:"S\xfaper Saiyan Dios SS",minKi:4e3,emoji:"\uD83D\uDD35"},{key:"blue_kaioken",name:"Dios SS + Kaioken",minKi:5500,emoji:"\uD83D\uDD35\uD83D\uDD25"},{key:"ui",name:"Ultra Instinto",minKi:7e3,emoji:"⚪"},{key:"mui",name:"Ultra Instinto Dominado",minKi:9e3,emoji:"⚪✨"}];function a(e){let t=s[0];for(let r of s)e>=r.minKi&&(t=r);return t}function i(e){for(let t of s)if(e<t.minKi)return t;return null}},4168:(e,t,r)=>{"use strict";r.d(t,{rn:()=>d,nn:()=>o,tu:()=>l,e6:()=>c});var s=r(3864),a=r(7577);function i(e,t,r){return function(e,t,r){"function"==typeof e?(s=t||[],i=r):(s=[],i=t);var s,i,n=a.useRef({hasResult:!1,result:i,error:null}),o=a.useReducer(function(e){return e+1},0);o[0];var l=o[1],d=a.useMemo(function(){var t="function"==typeof e?e():e;if(!t||"function"!=typeof t.subscribe){if(e===t)throw TypeError("Given argument to useObservable() was neither a valid observable nor a function.");throw TypeError("Observable factory given to useObservable() did not return a valid observable.")}if(!n.current.hasResult&&"undefined"!=typeof window&&("function"!=typeof t.hasValue||t.hasValue())){if("function"==typeof t.getValue)n.current.result=t.getValue(),n.current.hasResult=!0;else{var r=t.subscribe(function(e){n.current.result=e,n.current.hasResult=!0});"function"==typeof r?r():r.unsubscribe()}}return t},s);if(a.useDebugValue(n.current.result),a.useEffect(function(){var e=d.subscribe(function(e){var t=n.current;(null!==t.error||t.result!==e)&&(t.error=null,t.result=e,t.hasResult=!0,l())},function(e){var t=n.current;t.error!==e&&(t.error=e,l())});return"function"==typeof e?e:e.unsubscribe.bind(e)},s),n.current.error)throw n.current.error;return n.current.result}(function(){return(0,s.Y1)(e)},t||[],r)}var n=r(6205);function o(){let e=i(async()=>n.db.player.get("player"),[]),t=i(async()=>n.db.settings.get("settings"),[]);return{player:e,settings:t,loading:!e||!t}}function l(e){return{questCompletions:i(async()=>n.db.quests.where({dateISO:e}).toArray(),[e])??[],actions:i(async()=>n.db.actions.where({dateISO:e}).toArray(),[e])??[],workouts:i(async()=>n.db.workouts.where({dateISO:e}).toArray(),[e])??[]}}function d(){return i(async()=>await n.db.actions.orderBy("dateISO").toArray(),[])??[]}function c(e=30){return i(async()=>await n.db.workouts.orderBy("completedAtISO").reverse().limit(e).toArray(),[e])??[]}},2847:(e,t,r)=>{"use strict";r.d(t,{js:()=>l,ar:()=>n});var s=r(6205);let a=[{questId:"main_workout",title:"Main Quest: Entrenamiento",description:"Completa el entrenamiento del d\xeda (modo completo o corto).",rewardKi:0},{questId:"side_walk_or_mobility",title:"Side Quest: Movimiento suave",description:"Haz una caminata de 20–30 min o movilidad 8–12 min.",rewardKi:5,actionType:"walk"},{questId:"discipline_sleep",title:"Discipline Quest: Descanso",description:"Dorm\xed bien (autodeclarado).",rewardKi:5,actionType:"sleep"},{questId:"discipline_food",title:"Discipline Quest: Alimentaci\xf3n",description:"Com\xed decente hoy (autodeclarado).",rewardKi:5,actionType:"food"}];var i=r(6714);function n(){return a}async function o(e,t){return await s.db.quests.where({dateISO:e,questId:t}).count()>0}async function l(e){let{dateISO:t,questId:r,actionOverride:n}=e;if(await o(t,r))return{kiAdded:0,message:"Quest ya completada hoy."};let l=a.find(e=>e.questId===r);if(!l)throw Error("Quest desconocida");await s.db.quests.add({dateISO:t,questId:r,completedAtISO:new Date().toISOString(),meta:n?{actionOverride:n}:void 0});if("side_walk_or_mobility"===r){let e=await (0,i.J)({todayISO:t,type:n??"walk",note:`quest:${r}`});return{kiAdded:e.kiAdded,message:e.message}}if(l.actionType){let e=await (0,i.J)({todayISO:t,type:l.actionType,note:`quest:${r}`});return{kiAdded:e.kiAdded,message:e.message}}return{kiAdded:0,message:"Quest registrada."}}},5480:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var s=r(8570);let a=(0,s.createProxy)(String.raw`/Users/tbuddemberg/Desktop/Escuela/escuela-tortuga/src/app/page.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let o=(0,s.createProxy)(String.raw`/Users/tbuddemberg/Desktop/Escuela/escuela-tortuga/src/app/page.tsx#default`)}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,693,55],()=>r(1601));module.exports=s})();