"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{5602:function(e,n,t){t.r(n),t.d(n,{default:function(){return o}});var l=t(7437),r=t(7138),a=t(2265),u=t(3960);function o(e){let{className:n}=e,[t,o]=(0,a.useState)(null),[i,s]=(0,a.useState)(null),[c,d]=(0,a.useState)(0);(0,a.useEffect)(()=>{let e=()=>{try{let e=localStorage.getItem("capsuleTimerV1_capsule_30"),n=localStorage.getItem("capsuleTimerV1_capsule_60"),t=e=>{if(!e)return null;let n=JSON.parse(e),t="number"==typeof(null==n?void 0:n.endAtMs)?n.endAtMs:null,l="number"==typeof(null==n?void 0:n.remaining)?n.remaining:0;return t?{endAtMs:t,remaining:l}:null},l=t(e),r=t(n),a=Date.now(),u=[];l&&l.endAtMs>a&&u.push({v:"capsule_30",e:l.endAtMs,r:l.remaining}),r&&r.endAtMs>a&&u.push({v:"capsule_60",e:r.endAtMs,r:r.remaining}),0===u.length?(s(null),o(null),d(0)):(u.sort((e,n)=>e.e-n.e),s(u[0].v),o(u[0].e),d(Math.max(0,Math.floor((u[0].e-a)/1e3))))}catch(e){s(null),o(null),d(0)}};e();let n=window.setInterval(()=>{if(!t){e();return}let n=Math.max(0,Math.floor((t-Date.now())/1e3));d(n),n<=0&&(s(null),o(null))},1e3),l=n=>{var t;(null===(t=n.key)||void 0===t?void 0:t.startsWith("capsuleTimerV1_capsule_"))&&e()};return window.addEventListener("storage",l),()=>{window.clearInterval(n),window.removeEventListener("storage",l)}},[t]);let f=(0,a.useMemo)(()=>{if(!i)return null;let e="capsule_60"===i?"1h":"30m";return"Orgullo ".concat(e,": ").concat((0,u.Z)(c))},[i,c]);return i?(0,l.jsxs)(r.default,{href:"/orgullo",className:["inline-flex items-center gap-2 rounded-xl border border-emerald-400/25 bg-emerald-400/10 px-3 py-1 text-xs text-emerald-100 hover:bg-emerald-400/15",null!=n?n:""].join(" "),title:"Temporizador activo â€” ver Orgullo Saiyajin",children:[(0,l.jsx)("span",{className:"inline-block h-2 w-2 rounded-full bg-emerald-300 animate-pulse"}),f]}):null}},3960:function(e,n,t){function l(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter(Boolean).join(" ")}function r(e){return!e||e<=0?"0:00":"".concat(Math.floor(e/60),":").concat(String(Math.floor(e%60)).padStart(2,"0"))}t.d(n,{Z:function(){return r},cn:function(){return l}})}}]);