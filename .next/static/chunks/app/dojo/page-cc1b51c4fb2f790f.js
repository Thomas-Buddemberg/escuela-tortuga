(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[62],{5328:function(e,t,s){Promise.resolve().then(s.bind(s,7229))},7229:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var r=s(7437),n=s(1672),i=s(2265),a=s(2694),o=s(111);function l(){let{player:e,settings:t,loading:s}=(0,a.nn)(),[l,c]=(0,i.useState)(""),u=(0,i.useMemo)(()=>{let e=l.trim().toLowerCase();return o.n.slice().sort((e,t)=>e.minKi-t.minKi).filter(t=>!e||t.name.toLowerCase().includes(e))},[l]);return!s&&e&&t?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(n.Z,{title:"Dojo de ejercicios",right:(0,r.jsxs)("div",{className:"text-xs text-white/60",children:["KI: ",e.kiTotal]}),children:(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)("input",{value:l,onChange:e=>c(e.target.value),placeholder:"Buscar ejercicio...",className:"w-full rounded-xl border border-white/10 bg-black/20 px-3 py-2 text-sm outline-none focus:border-white/25"})})}),(0,r.jsx)(n.Z,{title:"Cat\xe1logo",children:(0,r.jsx)("div",{className:"space-y-2",children:u.map(t=>{var s;let n=e.kiTotal>=t.minKi,i=t.reps?"".concat(t.sets,"\xd7").concat(t.reps," reps"):"".concat(t.sets,"\xd7").concat(null!==(s=t.timeSec)&&void 0!==s?s:0,"s");return(0,r.jsx)("div",{className:["rounded-2xl border p-3",n?"border-white/10 bg-black/20":"border-white/10 bg-black/10 opacity-70"].join(" "),children:(0,r.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-semibold",children:t.name}),(0,r.jsxs)("div",{className:"text-xs text-white/60",children:[i," • descanso ",t.restSec,"s • min KI ",t.minKi]}),(0,r.jsxs)("div",{className:"mt-1 text-[11px] text-white/55",children:["Tags: ",t.tags.join(", ")]})]}),(0,r.jsx)("div",{className:"text-xs",children:n?(0,r.jsx)("span",{className:"rounded-xl border border-emerald-500/25 bg-emerald-500/12 px-2 py-1 text-emerald-100",children:"Activo"}):(0,r.jsx)("span",{className:"rounded-xl border border-white/10 bg-white/5 px-2 py-1 text-white/60",children:"Bloqueado"})})]})},t.id)})})})]}):(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsx)(n.Z,{title:"Cargando dojo..."})})}},1672:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var r=s(7437);function n(e){let{title:t,children:s,right:n}=e;return(0,r.jsxs)("section",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-soft",children:[t||n?(0,r.jsxs)("header",{className:"mb-3 flex items-start justify-between gap-4",children:[t?(0,r.jsx)("h2",{className:"text-sm font-semibold text-white/90",children:t}):(0,r.jsx)("div",{}),n]}):null,null!=s?s:null]})}},1550:function(e,t,s){"use strict";function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(s,"-").concat(r)}function n(e,t){return e===function(e,t){let s=function(e){let[t,s,r]=e.split("-").map(e=>Number(e));return new Date(t,(null!=s?s:1)-1,null!=r?r:1)}(e);return s.setDate(s.getDate()+-1),r(s)}(t,0)}s.d(t,{Gs:function(){return r},tn:function(){return n}})},9608:function(e,t,s){"use strict";s.d(t,{C6:function(){return c},Sh:function(){return o},db:function(){return a},j3:function(){return u},wv:function(){return l}});var r=s(4635),n=s(1550);class i extends r.ZP{constructor(){super("turtleKiDB"),this.version(1).stores({player:"id",settings:"id",actions:"++id, dateISO, type, createdAtISO",quests:"++id, dateISO, questId, completedAtISO",workouts:"++id, dateISO, templateId, completedAtISO"})}}let a=new i;async function o(){let[e,t]=await Promise.all([a.player.get("player"),a.settings.get("settings")]),s=new Date().toISOString(),r=(0,n.Gs)();e||await a.player.put({id:"player",kiTotal:0,kiToday:0,streak:0,lastDailyResetISO:r,lastTrainingISO:void 0,createdAtISO:s,updatedAtISO:s}),t||await a.settings.put({id:"settings",dailyKiCap:50,difficulty:"normal",reduceMotion:!1})}async function l(){await a.transaction("rw",[a.player,a.settings,a.actions,a.quests,a.workouts],async()=>{await Promise.all([a.player.clear(),a.settings.clear(),a.actions.clear(),a.quests.clear(),a.workouts.clear()])}),await o()}async function c(){let[e,t,s,r,n]=await Promise.all([a.player.get("player"),a.settings.get("settings"),a.actions.toArray(),a.quests.toArray(),a.workouts.toArray()]);return{exportedAtISO:new Date().toISOString(),player:e,settings:t,actions:s,quests:r,workouts:n}}async function u(e){if(!e||"object"!=typeof e)throw Error("Payload inv\xe1lido");await a.transaction("rw",[a.player,a.settings,a.actions,a.quests,a.workouts],async()=>{await Promise.all([a.player.clear(),a.settings.clear(),a.actions.clear(),a.quests.clear(),a.workouts.clear()]),e.player&&await a.player.put(e.player),e.settings&&await a.settings.put(e.settings),Array.isArray(e.actions)&&e.actions.length&&await a.actions.bulkAdd(e.actions),Array.isArray(e.quests)&&e.quests.length&&await a.quests.bulkAdd(e.quests),Array.isArray(e.workouts)&&e.workouts.length&&await a.workouts.bulkAdd(e.workouts)}),await o()}},111:function(e,t,s){"use strict";s.d(t,{j:function(){return n},n:function(){return r}});let r=[{id:"pushup_knee",name:"Flexiones con rodillas",sets:3,reps:8,restSec:60,minKi:0,tags:["push"]},{id:"pushup",name:"Flexiones",sets:3,reps:8,restSec:60,minKi:50,tags:["push"]},{id:"pushup_slow",name:"Flexiones lentas (3s bajada)",sets:4,reps:10,restSec:75,minKi:300,tags:["push"]},{id:"pushup_decline",name:"Flexiones declinadas",sets:4,reps:10,restSec:90,minKi:600,tags:["push"]},{id:"dips_chair",name:"Fondos en silla/banco",sets:3,reps:10,restSec:75,minKi:250,tags:["push","triceps"]},{id:"squat",name:"Sentadillas aire",sets:3,reps:15,restSec:60,minKi:0,tags:["legs"]},{id:"squat_pause",name:"Sentadilla con pausa (1s abajo)",sets:4,reps:15,restSec:75,minKi:100,tags:["legs"]},{id:"lunge",name:"Zancadas",sets:3,reps:10,restSec:75,minKi:100,tags:["legs"]},{id:"split_squat",name:"Split squat (est\xe1tico)",sets:4,reps:10,restSec:90,minKi:600,tags:["legs"]},{id:"jump_squat",name:"Sentadillas con salto",sets:4,reps:12,restSec:90,minKi:1e3,tags:["legs","power"]},{id:"plank",name:"Plancha",sets:3,timeSec:20,restSec:45,minKi:0,tags:["core"]},{id:"plank_30",name:"Plancha",sets:3,timeSec:30,restSec:45,minKi:100,tags:["core"]},{id:"side_plank",name:"Plancha lateral",sets:3,timeSec:25,restSec:45,minKi:600,tags:["core"]},{id:"hollow",name:"Hollow hold",sets:3,timeSec:30,restSec:45,minKi:300,tags:["core"]},{id:"mountain_climbers",name:"Mountain climbers",sets:3,timeSec:30,restSec:45,minKi:600,tags:["conditioning","core"]},{id:"burpees",name:"Burpees",sets:4,reps:8,restSec:90,minKi:1e3,tags:["conditioning"]},{id:"bear_crawl",name:"Bear crawl (ida y vuelta)",sets:4,timeSec:25,restSec:75,minKi:1500,tags:["conditioning"]}];function n(e,t){let s=r.filter(e=>t.includes(e.id));if(0===s.length)throw Error("No candidates for exercise pick");let n=s.filter(t=>e>=t.minKi);return 0===n.length?s.sort((e,t)=>e.minKi-t.minKi)[0]:n.sort((e,t)=>t.minKi-e.minKi)[0]}},2694:function(e,t,s){"use strict";s.d(t,{nn:function(){return o},s2:function(){return c},tu:function(){return l},e6:function(){return u}});var r=s(4635),n=s(2265);function i(e,t,s){return function(e,t,s){"function"==typeof e?(r=t||[],i=s):(r=[],i=t);var r,i,a=n.useRef({hasResult:!1,result:i,error:null}),o=n.useReducer(function(e){return e+1},0);o[0];var l=o[1],c=n.useMemo(function(){var t="function"==typeof e?e():e;if(!t||"function"!=typeof t.subscribe){if(e===t)throw TypeError("Given argument to useObservable() was neither a valid observable nor a function.");throw TypeError("Observable factory given to useObservable() did not return a valid observable.")}if(!a.current.hasResult&&"undefined"!=typeof window&&("function"!=typeof t.hasValue||t.hasValue())){if("function"==typeof t.getValue)a.current.result=t.getValue(),a.current.hasResult=!0;else{var s=t.subscribe(function(e){a.current.result=e,a.current.hasResult=!0});"function"==typeof s?s():s.unsubscribe()}}return t},r);if(n.useDebugValue(a.current.result),n.useEffect(function(){var e=c.subscribe(function(e){var t=a.current;(null!==t.error||t.result!==e)&&(t.error=null,t.result=e,t.hasResult=!0,l())},function(e){var t=a.current;t.error!==e&&(t.error=e,l())});return"function"==typeof e?e:e.unsubscribe.bind(e)},r),a.current.error)throw a.current.error;return a.current.result}(function(){return(0,r.Y1)(e)},t||[],s)}var a=s(9608);function o(){let e=i(async()=>a.db.player.get("player"),[]),t=i(async()=>a.db.settings.get("settings"),[]);return{player:e,settings:t,loading:!e||!t}}function l(e){let t=i(async()=>a.db.quests.where({dateISO:e}).toArray(),[e]),s=i(async()=>a.db.actions.where({dateISO:e}).toArray(),[e]),r=i(async()=>a.db.workouts.where({dateISO:e}).toArray(),[e]);return{questCompletions:null!=t?t:[],actions:null!=s?s:[],workouts:null!=r?r:[]}}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=i(async()=>await a.db.actions.orderBy("createdAtISO").reverse().limit(e).toArray(),[e]);return null!=t?t:[]}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=i(async()=>await a.db.workouts.orderBy("completedAtISO").reverse().limit(e).toArray(),[e]);return null!=t?t:[]}}},function(e){e.O(0,[635,971,23,744],function(){return e(e.s=5328)}),_N_E=e.O()}]);