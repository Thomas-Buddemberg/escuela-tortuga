(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[901],{7512:function(e,s,t){Promise.resolve().then(t.bind(t,7361))},7361:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var i=t(7437),a=t(1672),r=t(2098),n=t(8873),l=t(2265),d=t(2694),c=t(1550),o=t(8902),m=t(7424),u=t(3960);function x(e){let{variant:s}=e,t="capsule_60"===s;return(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3",children:[(0,i.jsx)("div",{className:"text-sm font-semibold",children:"Calentamiento (5–8 min)"}),(0,i.jsxs)("ul",{className:"mt-1 list-disc pl-5 text-xs text-white/65",children:[(0,i.jsx)("li",{children:"5' caminata o bici suave"}),(0,i.jsx)("li",{children:"Movilidad: hombros, caderas y tobillos"})]})]}),(0,i.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3",children:[(0,i.jsx)("div",{className:"text-sm font-semibold",children:"Fuerza en m\xe1quinas"}),(0,i.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,i.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3",children:[(0,i.jsx)("div",{className:"text-sm font-semibold",children:"Chest press (m\xe1quina)"}),(0,i.jsxs)("div",{className:"text-xs text-white/60",children:[t?"4\xd710–12 reps":"3\xd710–12 reps"," • descanso 60–90s"]})]}),(0,i.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3",children:[(0,i.jsx)("div",{className:"text-sm font-semibold",children:"Lat pulldown"}),(0,i.jsxs)("div",{className:"text-xs text-white/60",children:[t?"4\xd78–10 reps":"3\xd78–10 reps"," • descanso 60–90s"]})]}),(0,i.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3",children:[(0,i.jsx)("div",{className:"text-sm font-semibold",children:"Prensa de piernas"}),(0,i.jsxs)("div",{className:"text-xs text-white/60",children:[t?"4\xd710–12 reps":"3\xd710–12 reps"," • descanso 90s"]})]}),(0,i.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3",children:[(0,i.jsx)("div",{className:"text-sm font-semibold",children:"Remo sentado (cable/m\xe1quina)"}),(0,i.jsxs)("div",{className:"text-xs text-white/60",children:[t?"3–4\xd710–12 reps":"3\xd710–12 reps"," • descanso 60–90s"]})]}),(0,i.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3",children:[(0,i.jsx)("div",{className:"text-sm font-semibold",children:"Extensi\xf3n de piernas"}),(0,i.jsxs)("div",{className:"text-xs text-white/60",children:[t?"3–4\xd712–15 reps":"3\xd712–15 reps"," • descanso 60–75s"]})]}),(0,i.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3",children:[(0,i.jsx)("div",{className:"text-sm font-semibold",children:"Curl femoral (m\xe1quina)"}),(0,i.jsxs)("div",{className:"text-xs text-white/60",children:[t?"3–4\xd710–12 reps":"3\xd710–12 reps"," • descanso 60–75s"]})]}),t&&(0,i.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3",children:[(0,i.jsx)("div",{className:"text-sm font-semibold",children:"Press hombro (m\xe1quina)"}),(0,i.jsx)("div",{className:"text-xs text-white/60",children:"3\xd710–12 reps • descanso 60–75s"})]})]})]}),(0,i.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3",children:[(0,i.jsx)("div",{className:"text-sm font-semibold",children:"Core + gemelos"}),(0,i.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,i.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3",children:[(0,i.jsx)("div",{className:"text-sm font-semibold",children:"Crunch en cable o m\xe1quina"}),(0,i.jsxs)("div",{className:"text-xs text-white/60",children:[t?"3–4\xd712–15 reps":"3\xd712–15 reps"," • descanso 45–60s"]})]}),(0,i.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3",children:[(0,i.jsx)("div",{className:"text-sm font-semibold",children:"Elevaci\xf3n de talones (m\xe1quina gemelos)"}),(0,i.jsxs)("div",{className:"text-xs text-white/60",children:[t?"4\xd712–15 reps":"3\xd712–15 reps"," • descanso 60s"]})]})]})]}),(0,i.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3",children:[(0,i.jsx)("div",{className:"text-sm font-semibold",children:"Vuelta a la calma (3–5 min)"}),(0,i.jsx)("ul",{className:"mt-1 list-disc pl-5 text-xs text-white/65",children:(0,i.jsx)("li",{children:"Caminar suave + estirar cu\xe1driceps, isquios, pecho y dorsales"})})]})]})}function h(){let{player:e,settings:s,loading:t}=(0,d.nn)(),[h,p]=(0,l.useState)("capsule_30"),[b,w]=(0,l.useState)(null),{remaining:f,base:j,isActive:v,start:N,pause:g,reset:y}=function(e){let s="capsule_60"===e?3600:1800,[t,i]=(0,l.useState)(s),[a,r]=(0,l.useState)(null),[n,d]=(0,l.useState)(!1),o=(0,c.Gs)(),m="capsuleTimerV1_".concat(e);return(0,l.useEffect)(()=>{try{let e=localStorage.getItem(m);if(e){let t=JSON.parse(e);if(t&&t.dateISO===o){let e="number"==typeof t.remaining?t.remaining:s,a="number"==typeof t.endAtMs?t.endAtMs:null;i(e),r(a),d(!!a&&a>Date.now())}else localStorage.removeItem(m),i(s),r(null),d(!1)}else i(s),r(null),d(!1)}catch(e){i(s),r(null),d(!1)}},[m,o,s]),(0,l.useEffect)(()=>{if(!n||!a)return;let e=()=>{let e=Math.max(0,Math.floor((a-Date.now())/1e3));i(e),e<=0&&(d(!1),r(null))};e();let s=window.setInterval(e,1e3);return()=>window.clearInterval(s)},[n,a]),(0,l.useEffect)(()=>{try{localStorage.setItem(m,JSON.stringify({dateISO:o,remaining:t,endAtMs:a}))}catch(e){}},[m,o,t,a]),{remaining:t,base:s,isActive:n,start:()=>{n||(r(Date.now()+1e3*t),d(!0))},pause:()=>{n&&(a&&i(Math.max(0,Math.floor((a-Date.now())/1e3))),r(null),d(!1))},reset:()=>{i(s),r(null),d(!1);try{localStorage.removeItem(m)}catch(e){}}}}(h),_=(0,c.Gs)();if((0,l.useEffect)(()=>{v||0!==f||w("Tiempo cumplido ✅")},[v,f]),t||!e||!s)return(0,i.jsx)("div",{className:"space-y-4",children:(0,i.jsx)(a.Z,{title:"Cargando Orgullo Saiyajin..."})});async function k(){await (0,m.js)({dateISO:_,questId:"main_workout"}),w((await (0,o.nQ)({todayISO:_,templateId:"capsule_60"===h?"capsule_gym_60":"capsule_gym_30",variant:h,durationSec:Math.max(0,j-f)})).message),g(),y()}return(0,i.jsxs)("div",{className:"space-y-4",children:[b?(0,i.jsx)(n.Z,{message:b,kind:"success",onClose:()=>w(null)}):null,(0,i.jsxs)(a.Z,{title:"Orgullo Saiyajin",right:(0,i.jsx)("div",{className:"text-xs text-white/60",children:"capsule_60"===h?"+40 KI":"+20 KI"}),children:[(0,i.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,i.jsx)("div",{className:"text-sm text-white/70",children:"Rutinas de m\xe1quinas de gimnasio"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("button",{className:(0,u.cn)("rounded-xl border px-3 py-2 text-sm","capsule_30"===h?"border-white/25 bg-white/10":"border-white/10 bg-black/20 text-white/70"),onClick:()=>p("capsule_30"),children:"30 min (+20 KI)"}),(0,i.jsx)("button",{className:(0,u.cn)("rounded-xl border px-3 py-2 text-sm","capsule_60"===h?"border-white/25 bg-white/10":"border-white/10 bg-black/20 text-white/70"),onClick:()=>p("capsule_60"),children:"1 hora (+40 KI)"})]})]}),(0,i.jsx)("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/20 p-3",children:(0,i.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsx)("span",{className:"text-white/70",children:"Tiempo restante:"})," ",(0,i.jsx)("span",{className:"font-semibold",children:(0,u.Z)(f)})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(r.Z,{variant:"secondary",onClick:()=>v?g():N(),children:v?"Pausar":"Iniciar"}),(0,i.jsx)(r.Z,{variant:"ghost",onClick:()=>{g(),y()},children:"Reiniciar"})]})]})})]}),(0,i.jsxs)(a.Z,{title:"Plan sugerido",children:[(0,i.jsx)(x,{variant:h}),(0,i.jsx)("div",{className:"mt-4 flex gap-2",children:(0,i.jsx)(r.Z,{variant:"primary",onClick:k,children:"Finalizar entrenamiento"})})]})]})}},7424:function(e,s,t){"use strict";t.d(s,{js:function(){return d},ar:function(){return n}});var i=t(9608);let a=[{questId:"main_workout",title:"Main Quest: Entrenamiento",description:"Completa el entrenamiento del d\xeda (modo completo o corto).",rewardKi:0},{questId:"side_walk_or_mobility",title:"Side Quest: Movimiento suave",description:"Haz una caminata de 20–30 min o movilidad 8–12 min.",rewardKi:5,actionType:"walk"},{questId:"discipline_sleep",title:"Discipline Quest: Descanso",description:"Dorm\xed bien (autodeclarado).",rewardKi:5,actionType:"sleep"},{questId:"discipline_food",title:"Discipline Quest: Alimentaci\xf3n",description:"Com\xed decente hoy (autodeclarado).",rewardKi:5,actionType:"food"}];var r=t(8902);function n(){return a}async function l(e,s){return await i.db.quests.where({dateISO:e,questId:s}).count()>0}async function d(e){let{dateISO:s,questId:t,actionOverride:n}=e;if(await l(s,t))return{kiAdded:0,message:"Quest ya completada hoy."};let d=a.find(e=>e.questId===t);if(!d)throw Error("Quest desconocida");await i.db.quests.add({dateISO:s,questId:t,completedAtISO:new Date().toISOString(),meta:n?{actionOverride:n}:void 0});if("side_walk_or_mobility"===t){let e=await (0,r.J)({todayISO:s,type:null!=n?n:"walk",note:"quest:".concat(t)});return{kiAdded:e.kiAdded,message:e.message}}if(d.actionType){let e=await (0,r.J)({todayISO:s,type:d.actionType,note:"quest:".concat(t)});return{kiAdded:e.kiAdded,message:e.message}}return{kiAdded:0,message:"Quest registrada."}}},3960:function(e,s,t){"use strict";function i(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter(Boolean).join(" ")}function a(e){return!e||e<=0?"0:00":"".concat(Math.floor(e/60),":").concat(String(Math.floor(e%60)).padStart(2,"0"))}t.d(s,{Z:function(){return a},cn:function(){return i}})}},function(e){e.O(0,[635,173,971,23,744],function(){return e(e.s=7512)}),_N_E=e.O()}]);