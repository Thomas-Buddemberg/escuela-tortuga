(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[535],{9335:function(e,i,t){Promise.resolve().then(t.bind(t,2635))},2635:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return y}});var s=t(7437),n=t(2265),a=t(1672),r=t(2098),l=t(8873),o=t(1550),c=t(2694),d=t(149),u=t(4002),m=t(111);let p=[{id:"turtle_basic",name:"Escuela de la Tortuga — Base",minKi:0,estimatedMinutes:18,type:"full",notes:["T\xe9cnica > velocidad","Deja 1–2 reps en reserva"]},{id:"turtle_kaioken",name:"Kaioken — Volumen controlado",minKi:100,estimatedMinutes:22,type:"full",notes:["Respira y controla ritmo","Descansos completos"]},{id:"turtle_kaioken10",name:"Kaioken \xd710 — Intensidad",minKi:300,estimatedMinutes:26,type:"full",notes:["Mant\xe9n forma estricta","Si duele (articulaci\xf3n), baja variante"]},{id:"turtle_ssj_A",name:"S\xfaper Saiyan — D\xeda A (Empuje + core)",minKi:600,estimatedMinutes:28,type:"splitA",notes:["Sube volumen de push","Core s\xf3lido"]},{id:"turtle_ssj_B",name:"S\xfaper Saiyan — D\xeda B (Piernas + core)",minKi:600,estimatedMinutes:28,type:"splitB",notes:["Piernas y estabilidad","Control de rodillas"]},{id:"turtle_ssj2_A",name:"SSJ2 — Potencia (A)",minKi:1e3,estimatedMinutes:32,type:"splitA",notes:["Explosividad con control","No busques fallo"]},{id:"turtle_ssj2_B",name:"SSJ2 — Potencia (B)",minKi:1e3,estimatedMinutes:32,type:"splitB",notes:["Saltos moderados","Recuperaci\xf3n completa"]},{id:"turtle_ssj3",name:"SSJ3 — Resistencia",minKi:1500,estimatedMinutes:34,type:"full",notes:["Circuitos","Ritmo constante"]},{id:"turtle_ssj4",name:"SSJ4 — Fuerza total",minKi:2200,estimatedMinutes:36,type:"full",notes:["Control corporal","Calienta bien"]},{id:"turtle_god",name:"Saiyan Dios — Precisi\xf3n",minKi:3e3,estimatedMinutes:30,type:"full",notes:["Menos pero mejor","Reps perfectas"]},{id:"turtle_blue",name:"Dios SS — Explosivo",minKi:4e3,estimatedMinutes:34,type:"full",notes:["Explosividad + t\xe9cnica","Descanso suficiente"]},{id:"turtle_blue_kaioken",name:"Dios SS + Kaioken — Alternado",minKi:5500,estimatedMinutes:36,type:"full",notes:["Autoregulaci\xf3n","Si est\xe1s agotado: modo corto"]},{id:"turtle_ui",name:"Ultra Instinto — Fluidez",minKi:7e3,estimatedMinutes:34,type:"full",notes:["Fluye","Movimiento limpio"]},{id:"turtle_mui",name:"UI Dominado — Maestr\xeda",minKi:9e3,estimatedMinutes:36,type:"full",notes:["Consistencia","Detalles y respiraci\xf3n"]}];function h(e,i){let t={...e};return"number"==typeof t.reps&&(t.reps=Math.max(1,Math.round(t.reps*i))),"number"==typeof t.timeSec&&(t.timeSec=Math.max(10,Math.round(t.timeSec*i))),t}var x=t(8902),f=t(9608),S=t(7424),j=t(3960);function y(){let e=(0,o.Gs)(),{player:i,settings:t,loading:y}=(0,c.nn)(),[b,g]=(0,n.useState)("full"),[w,k]=(0,n.useState)(null),[v,K]=(0,n.useState)(!1),[_,D]=(0,n.useState)(0),N=(0,n.useRef)(null),M=(0,n.useMemo)(()=>i&&t?function(e,i,t){let s=function(e,i){var t;let s=p.filter(i=>e>=i.minKi).sort((e,i)=>i.minKi-e.minKi),n=null!==(t=s[0])&&void 0!==t?t:p[0];if("splitA"===n.type||"splitB"===n.type){let e=Number(i.slice(-2))%2==0,t=n.id.includes("_A")||n.id.includes("_B")?n.id.slice(0,-2):n.id,a=s.find(i=>i.id.startsWith(t)&&(e?"splitA"===i.type:"splitB"===i.type));return null!=a?a:n}return n}(e,t),n=(0,d.rS)(e).key,a=(0,u.wc)(i.difficulty),r=(0,m.j)(e,["pushup_knee","pushup","pushup_slow","pushup_decline"]),l=(0,m.j)(e,["squat","squat_pause","lunge","split_squat","jump_squat"]),o=(0,m.j)(e,["plank","plank_30","hollow","side_plank","mountain_climbers"]),c=(0,m.j)(e,["dips_chair","pushup"]),x=(0,m.j)(e,["mountain_climbers","burpees","bear_crawl"]),f=[{name:"Bloque A (Fuerza)",exercises:[h(r,a),h(l,a)]},{name:"Bloque B (Accesorios)",exercises:[h(c,a),h(o,a)]}],S=[{name:"Bloque A (Empuje)",exercises:[h(r,a),h(c,a)]},{name:"Bloque B (Core)",exercises:[h(o,a)]}],j=[{name:"Bloque A (Piernas)",exercises:[h(l,a)]},{name:"Bloque B (Core + estabilidad)",exercises:[h(o,a)]}],y={name:"Finisher (opcional, 3–6 min)",exercises:[h(x,a)]},b=[{name:"Calentamiento (3–5 min)",exercises:[{id:"warm_mobility",name:"Movilidad general (cuello, hombros, cadera)",sets:1,timeSec:180,restSec:0,minKi:0,tags:["warmup"]},{id:"warm_activation",name:"Activaci\xf3n (sentadilla suave + brazos)",sets:1,timeSec:120,restSec:0,minKi:0,tags:["warmup"]}]}];return(b="splitA"===s.type?b.concat(S):"splitB"===s.type?b.concat(j):b.concat(f)).push(y,{name:"Vuelta a la calma (2–4 min)",exercises:[{id:"cool_breath",name:"Respiraci\xf3n nasal + caminar suave",sets:1,timeSec:120,restSec:0,minKi:0,tags:["cooldown"]},{id:"cool_stretch",name:"Estiramiento suave (piernas/pecho)",sets:1,timeSec:120,restSec:0,minKi:0,tags:["cooldown"]}]}),{dateISO:t,templateId:s.id,name:s.name,estimatedMinutes:s.estimatedMinutes,transformation:n,notes:s.notes,blocks:b}}(i.kiTotal,t,e):null,[i,t,e]),[q,A]=(0,n.useState)({});function C(e,i,t){A(s=>{var n;let a=null!==(n=s[e])&&void 0!==n?n:0;return{...s,[e]:Math.max(0,Math.min(i,a+t))}})}async function I(){M&&(await (0,S.js)({dateISO:e,questId:"main_workout"}),k((await (0,x.XI)({todayISO:e,templateId:M.templateId,mode:b,durationSec:_})).message),K(!1),D(0),A({}))}async function B(){K(!1),D(0),A({}),k("Sesi\xf3n reiniciada.")}async function E(){await (0,S.js)({dateISO:e,questId:"side_walk_or_mobility",actionOverride:"mobility"}),k("Movilidad marcada ✅")}if((0,n.useEffect)(()=>{if(v)return N.current=window.setInterval(()=>D(e=>e+1),1e3),()=>{N.current&&window.clearInterval(N.current),N.current=null}},[v]),y||!i||!t||!M)return(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(a.Z,{title:"Cargando entrenamiento...",children:(0,s.jsx)("p",{className:"text-sm text-white/70",children:"Buscando la rutina adecuada seg\xfan tu KI \uD83D\uDC22"})})});let P=M.blocks.flatMap(e=>e.exercises),F=P.reduce((e,i)=>{var t;return e+(null!==(t=i.sets)&&void 0!==t?t:0)},0),Z=P.reduce((e,i)=>{var t;return e+Math.min(i.sets,null!==(t=q[i.id])&&void 0!==t?t:0)},0);return(0,s.jsxs)("div",{className:"space-y-4",children:[w?(0,s.jsx)(l.Z,{message:w,kind:"success",onClose:()=>k(null)}):null,(0,s.jsxs)(a.Z,{title:"Entrenamiento del d\xeda",right:(0,s.jsxs)("div",{className:"text-xs text-white/60",children:["Plantilla: ",M.templateId]}),children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-lg font-semibold",children:M.name}),(0,s.jsxs)("div",{className:"text-xs text-white/60",children:["Estimado ",M.estimatedMinutes," min • Forma: ",(0,s.jsx)("span",{className:"font-semibold",children:M.transformation})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{className:(0,j.cn)("rounded-xl border px-3 py-2 text-sm","full"===b?"border-white/25 bg-white/10":"border-white/10 bg-black/20 text-white/70"),onClick:()=>g("full"),children:"Completo (+20 KI)"}),(0,s.jsx)("button",{className:(0,j.cn)("rounded-xl border px-3 py-2 text-sm","quick"===b?"border-white/25 bg-white/10":"border-white/10 bg-black/20 text-white/70"),onClick:()=>g("quick"),children:"Corto (+10 KI)"})]})]}),(0,s.jsx)("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/20 p-3",children:(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("span",{className:"text-white/70",children:"Tiempo:"})," ",(0,s.jsx)("span",{className:"font-semibold",children:(0,j.Z)(_)}),(0,s.jsx)("span",{className:"text-white/50",children:" • "}),(0,s.jsx)("span",{className:"text-white/70",children:"Progreso sets:"})," ",(0,s.jsxs)("span",{className:"font-semibold",children:[Z,"/",F]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(r.Z,{variant:"secondary",onClick:function(){v?K(!1):(K(!0),D(0))},children:v?"Pausar":"Iniciar"}),(0,s.jsx)(r.Z,{variant:"ghost",onClick:B,children:"Reiniciar"})]})]})}),(0,s.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:(0,s.jsx)(r.Z,{variant:"secondary",onClick:E,children:"Marcar movilidad (Side Quest)"})})]}),(0,s.jsxs)(a.Z,{title:"Rutina",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[M.notes.length?(0,s.jsx)("ul",{className:"list-disc space-y-1 pl-5 text-xs text-white/65",children:M.notes.map(e=>(0,s.jsx)("li",{children:e},e))}):null,M.blocks.map(e=>(0,s.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/20 p-3",children:[(0,s.jsx)("div",{className:"text-sm font-semibold",children:e.name}),(0,s.jsx)("div",{className:"mt-2 space-y-2",children:e.exercises.map(e=>{var i,t,n;let a=null!==(t=q[e.id])&&void 0!==t?t:0,r=e.reps?"".concat(e.sets,"\xd7").concat(e.reps," reps"):"".concat(e.sets,"\xd7").concat(null!==(n=e.timeSec)&&void 0!==n?n:0,"s");return(0,s.jsx)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-semibold",children:e.name}),(0,s.jsxs)("div",{className:"text-xs text-white/60",children:[r," • descanso ",e.restSec,"s"]}),(null===(i=e.tips)||void 0===i?void 0:i.length)?(0,s.jsx)("ul",{className:"mt-1 list-disc pl-5 text-[11px] text-white/55",children:e.tips.map(e=>(0,s.jsx)("li",{children:e},e))}):null]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{className:"rounded-xl border border-white/10 bg-black/20 px-3 py-2 text-sm hover:bg-white/10",onClick:()=>C(e.id,e.sets,-1),children:"-"}),(0,s.jsxs)("div",{className:"min-w-[42px] text-center text-sm font-semibold",children:[a,"/",e.sets]}),(0,s.jsx)("button",{className:"rounded-xl border border-white/10 bg-black/20 px-3 py-2 text-sm hover:bg-white/10",onClick:()=>C(e.id,e.sets,1),children:"+"})]})]})},e.id)})})]},e.name))]}),(0,s.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,s.jsx)(r.Z,{variant:"primary",onClick:I,children:"Finalizar entrenamiento"}),(0,s.jsx)(r.Z,{variant:"ghost",onClick:async()=>{console.log("Actions today:",await f.db.actions.where({dateISO:e}).toArray()),k("Logs listos (ver consola).")},children:"Debug"})]})]})]})}},111:function(e,i,t){"use strict";t.d(i,{j:function(){return n},n:function(){return s}});let s=[{id:"pushup_knee",name:"Flexiones con rodillas",sets:3,reps:8,restSec:60,minKi:0,tags:["push"]},{id:"pushup",name:"Flexiones",sets:3,reps:8,restSec:60,minKi:50,tags:["push"]},{id:"pushup_slow",name:"Flexiones lentas (3s bajada)",sets:4,reps:10,restSec:75,minKi:300,tags:["push"]},{id:"pushup_decline",name:"Flexiones declinadas",sets:4,reps:10,restSec:90,minKi:600,tags:["push"]},{id:"dips_chair",name:"Fondos en silla/banco",sets:3,reps:10,restSec:75,minKi:250,tags:["push","triceps"]},{id:"squat",name:"Sentadillas aire",sets:3,reps:15,restSec:60,minKi:0,tags:["legs"]},{id:"squat_pause",name:"Sentadilla con pausa (1s abajo)",sets:4,reps:15,restSec:75,minKi:100,tags:["legs"]},{id:"lunge",name:"Zancadas",sets:3,reps:10,restSec:75,minKi:100,tags:["legs"]},{id:"split_squat",name:"Split squat (est\xe1tico)",sets:4,reps:10,restSec:90,minKi:600,tags:["legs"]},{id:"jump_squat",name:"Sentadillas con salto",sets:4,reps:12,restSec:90,minKi:1e3,tags:["legs","power"]},{id:"plank",name:"Plancha",sets:3,timeSec:20,restSec:45,minKi:0,tags:["core"]},{id:"plank_30",name:"Plancha",sets:3,timeSec:30,restSec:45,minKi:100,tags:["core"]},{id:"side_plank",name:"Plancha lateral",sets:3,timeSec:25,restSec:45,minKi:600,tags:["core"]},{id:"hollow",name:"Hollow hold",sets:3,timeSec:30,restSec:45,minKi:300,tags:["core"]},{id:"mountain_climbers",name:"Mountain climbers",sets:3,timeSec:30,restSec:45,minKi:600,tags:["conditioning","core"]},{id:"burpees",name:"Burpees",sets:4,reps:8,restSec:90,minKi:1e3,tags:["conditioning"]},{id:"bear_crawl",name:"Bear crawl (ida y vuelta)",sets:4,timeSec:25,restSec:75,minKi:1500,tags:["conditioning"]}];function n(e,i){let t=s.filter(e=>i.includes(e.id));if(0===t.length)throw Error("No candidates for exercise pick");let n=t.filter(i=>e>=i.minKi);return 0===n.length?t.sort((e,i)=>e.minKi-i.minKi)[0]:n.sort((e,i)=>i.minKi-e.minKi)[0]}},149:function(e,i,t){"use strict";t.d(i,{$T:function(){return a},YD:function(){return s},rS:function(){return n}});let s=[{key:"normal",name:"Normal",minKi:0,emoji:"\uD83D\uDE42"},{key:"kaioken",name:"Kaioken",minKi:100,emoji:"\uD83D\uDD25"},{key:"kaioken10",name:"Kaioken \xd710",minKi:300,emoji:"\uD83D\uDD25\uD83D\uDD25"},{key:"ssj",name:"S\xfaper Saiyan",minKi:600,emoji:"\uD83D\uDC9B"},{key:"ssj2",name:"S\xfaper Saiyan 2",minKi:1e3,emoji:"⚡"},{key:"ssj3",name:"S\xfaper Saiyan 3",minKi:1500,emoji:"\uD83D\uDD25"},{key:"ssj4",name:"S\xfaper Saiyan 4",minKi:2200,emoji:"\uD83E\uDD8D"},{key:"god",name:"S\xfaper Saiyan Dios",minKi:3e3,emoji:"\uD83D\uDD34"},{key:"blue",name:"S\xfaper Saiyan Dios SS",minKi:4e3,emoji:"\uD83D\uDD35"},{key:"blue_kaioken",name:"Dios SS + Kaioken",minKi:5500,emoji:"\uD83D\uDD35\uD83D\uDD25"},{key:"ui",name:"Ultra Instinto",minKi:7e3,emoji:"⚪"},{key:"mui",name:"Ultra Instinto Dominado",minKi:9e3,emoji:"⚪✨"}];function n(e){let i=s[0];for(let t of s)e>=t.minKi&&(i=t);return i}function a(e){for(let i of s)if(e<i.minKi)return i;return null}},7424:function(e,i,t){"use strict";t.d(i,{js:function(){return o},ar:function(){return r}});var s=t(9608);let n=[{questId:"main_workout",title:"Main Quest: Entrenamiento",description:"Completa el entrenamiento del d\xeda (modo completo o corto).",rewardKi:0},{questId:"side_walk_or_mobility",title:"Side Quest: Movimiento suave",description:"Haz una caminata de 20–30 min o movilidad 8–12 min.",rewardKi:5,actionType:"walk"},{questId:"discipline_sleep",title:"Discipline Quest: Descanso",description:"Dorm\xed bien (autodeclarado).",rewardKi:5,actionType:"sleep"},{questId:"discipline_food",title:"Discipline Quest: Alimentaci\xf3n",description:"Com\xed decente hoy (autodeclarado).",rewardKi:5,actionType:"food"}];var a=t(8902);function r(){return n}async function l(e,i){return await s.db.quests.where({dateISO:e,questId:i}).count()>0}async function o(e){let{dateISO:i,questId:t,actionOverride:r}=e;if(await l(i,t))return{kiAdded:0,message:"Quest ya completada hoy."};let o=n.find(e=>e.questId===t);if(!o)throw Error("Quest desconocida");await s.db.quests.add({dateISO:i,questId:t,completedAtISO:new Date().toISOString(),meta:r?{actionOverride:r}:void 0});if("side_walk_or_mobility"===t){let e=await (0,a.J)({todayISO:i,type:null!=r?r:"walk",note:"quest:".concat(t)});return{kiAdded:e.kiAdded,message:e.message}}if(o.actionType){let e=await (0,a.J)({todayISO:i,type:o.actionType,note:"quest:".concat(t)});return{kiAdded:e.kiAdded,message:e.message}}return{kiAdded:0,message:"Quest registrada."}}},3960:function(e,i,t){"use strict";function s(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return i.filter(Boolean).join(" ")}function n(e){return!e||e<=0?"0:00":"".concat(Math.floor(e/60),":").concat(String(Math.floor(e%60)).padStart(2,"0"))}t.d(i,{Z:function(){return n},cn:function(){return s}})}},function(e){e.O(0,[635,173,971,23,744],function(){return e(e.s=9335)}),_N_E=e.O()}]);